(nginx:1 wrk:1) root@dr1:/s1/dpdk-ans# ./run_wrk.sh
PROC	CONN	RPSavg	RPSmax	   LAT50    LAT75	LAT90	 LAT99  	LATmax	CPU_c	CPU_s
1      256      98.58k   110.25k  1.48ms   28.58ms  89.89ms 146.26ms  258.44ms  100+0   97+3
1      128     106.01k   115.40k   627us    2.12ms  33.77ms  62.39ms  121.45ms   99+0   97+2
1       64      99.90k   106.97k   337us     540us   1.34ms   7.50ms   36.34ms   99+0   96+3
1       32      64.27k    98.64k   211us     267us    340us    473us    1.35ms   98+1   96+3
1       16      23.04k    64.34k   173us     211us    259us    341us     597us   98+2   96+3
1        8      15.73k    40.42k   171us     187us    194us    274us     844us   98+1   97+3
1        4      23.36k    27.61k   177us     187us    192us    265us     587us   97+2   96+3
1        2      13.67k    17.76k   101us     188us    193us    209us     698us   97+2   97+2
1        1       7.03k     9.62k    96us     191us    195us    208us     346us   98+1   98+1

2      256      48.49k   90.71k   1.59ms  27.15ms  90.35ms  178.93ms  268.35ms   100+0   94+5
2      128      50.35k   69.29k    761us   2.96ms  38.36ms   81.04ms  128.38ms    99+0   93+6
2       64      49.80k   62.11k    285us    436us   1.41ms   12.73ms   52.34ms    99+0   92+7
2       32      31.60k   48.41k    186us    257us    301us     473us    7.34ms    97+2   93+6
2       16      21.56k   38.44k    178us    190us    213us     287us    1.44ms    98+1   96+3
2        8      21.96k   26.97k    176us    189us    200us     281us    1.27ms    97+2   93+6
2        4      12.05k   16.64k    105us    185us    193us     214us    1.35ms    97+2   94+5
2        2       7.27k    9.23k     94us    189us    192us     206us    1.06ms    97+2   95+4

4      256      24.09k   47.76k   2.02ms  6.20ms  84.23ms  199.33ms  271.09ms   100+0   88+11
4      128      24.46k   38.00k    735us  2.58ms  39.17ms   82.98ms  130.05ms   100+0   88+11
4       64      24.71k   36.54k    278us   387us   1.61ms   14.15ms   42.72ms    99+0   89+10
4       32      15.48k   34.92k    184us   260us    306us     471us    6.95ms    98+1    92+7
4       16      11.97k   20.77k    181us   192us    203us     288us    1.50ms    96+3    92+7
4        8       8.90k   14.21k     97us   186us    194us     263us    1.30ms    97+2    92+7
4        4       6.72k    8.13k    101us   188us    194us     220us    1.41ms    97+2    93+6

================================================================================================
(nginx:1 wrk:1) root@dr1:/s1/dpdk-ans# ./run_wrk.sh
PROC	CONN	RPSavg	RPSmax	   LAT50    LAT75	LAT90	 LAT99  	LATmax	CPU_c	CPU_s
1      256      98.58k   110.25k  1.48ms   28.58ms  89.89ms 146.26ms  258.44ms  100+0   97+3
1      128     106.01k   115.40k   627us    2.12ms  33.77ms  62.39ms  121.45ms   99+0   97+2
1       64      99.90k   106.97k   337us     540us   1.34ms   7.50ms   36.34ms   99+0   96+3
1       32      64.27k    98.64k   211us     267us    340us    473us    1.35ms   98+1   96+3
1       16      23.04k    64.34k   173us     211us    259us    341us     597us   98+2   96+3
1        8      15.73k    40.42k   171us     187us    194us    274us     844us   98+1   97+3
1        4      23.36k    27.61k   177us     187us    192us    265us     587us   97+2   96+3
1        2      13.67k    17.76k   101us     188us    193us    209us     698us   97+2   97+2
1        1       7.03k     9.62k    96us     191us    195us    208us     346us   98+1   98+1

2      256      48.49k   90.71k   1.59ms  27.15ms  90.35ms  178.93ms  268.35ms   100+0   94+5
2      128      50.35k   69.29k    761us   2.96ms  38.36ms   81.04ms  128.38ms    99+0   93+6
2       64      49.80k   62.11k    285us    436us   1.41ms   12.73ms   52.34ms    99+0   92+7
2       32      31.60k   48.41k    186us    257us    301us     473us    7.34ms    97+2   93+6
2       16      21.56k   38.44k    178us    190us    213us     287us    1.44ms    98+1   96+3
2        8      21.96k   26.97k    176us    189us    200us     281us    1.27ms    97+2   93+6
2        4      12.05k   16.64k    105us    185us    193us     214us    1.35ms    97+2   94+5
2        2       7.27k    9.23k     94us    189us    192us     206us    1.06ms    97+2   95+4

4      256      24.09k   47.76k   2.02ms  6.20ms  84.23ms  199.33ms  271.09ms   100+0   88+11
4      128      24.46k   38.00k    735us  2.58ms  39.17ms   82.98ms  130.05ms   100+0   88+11
4       64      24.71k   36.54k    278us   387us   1.61ms   14.15ms   42.72ms    99+0   89+10
4       32      15.48k   34.92k    184us   260us    306us     471us    6.95ms    98+1    92+7
4       16      11.97k   20.77k    181us   192us    203us     288us    1.50ms    96+3    92+7
4        8       8.90k   14.21k     97us   186us    194us     263us    1.30ms    97+2    92+7
4        4       6.72k    8.13k    101us   188us    194us     220us    1.41ms    97+2    93+6

[root@jbb3 dpdk-ans]# ./run_wrk.sh   #jemalloc
1      256      15.52k   15.84k   14.42ms  14.64ms  215.13ms  1.32s  1.52s   100+0   95+4
1      128      15.58k   15.72k   6.60ms  20.62ms  197.60ms  636.68ms  820.05ms   100+0   96+3
1      64      15.28k   15.72k   2.29ms  69.90ms  177.01ms  259.42ms  283.77ms   100+0   96+3
1      32      15.26k   15.65k   1.58ms  20.22ms  74.40ms  150.54ms  209.28ms   100+0   96+3
1      16      15.53k   15.67k   587us  15.11ms  38.53ms  73.77ms  92.35ms   100+0   96+3
1      8      15.21k   15.58k   293us  5.74ms  18.50ms  29.25ms  46.70ms   100+0   96+3
1      4      15.02k   15.39k   191us  275us  3.81ms  13.20ms  21.05ms   99+0   96+3
1      2      9.96k   10.03k   193us  193us  194us  195us  299us   98+1   97+2
1      1      8.27k   9.87k   99us  100us  198us  199us  300us   98+1   99+0
2      256      7.70k   15.43k   15.33ms  15.43ms  120.20ms  1.33s  1.68s   99+0   97+2
2      128      8.21k   15.46k   4.29ms  164.65ms  374.12ms  600.01ms  782.63ms   100+0   97+2
2      64      7.69k   15.21k   3.71ms  3.81ms  65.26ms  320.01ms  413.75ms   100+0   97+2
2      32      7.61k   15.30k   1.61ms  16.92ms  68.86ms  149.54ms  167.75ms   100+0   97+2
2      16      7.61k   9.33k   592us  15.53ms  39.33ms  75.34ms  95.63ms   100+0   97+2
2      8      7.62k   10.40k   300us  5.16ms  19.03ms  31.49ms  46.43ms   100+0   97+2
2      4      7.51k   9.82k   196us  203us  3.88ms  13.41ms  20.15ms   99+0   97+2
2      2      4.95k   4.99k   196us  198us  199us  200us  800us   98+1   98+1
4      256      3.92k   15.23k   15.64ms  15.73ms  131.69ms  1.34s  1.62s   100+0   97+2
4      128      3.91k   15.59k   7.30ms  7.50ms  135.37ms  674.80ms  793.43ms   100+0   97+2
4      64      3.88k   15.40k   3.61ms  3.71ms  75.04ms  323.51ms  413.02ms   100+0   97+2
4      32      3.87k   10.30k   1.50ms  23.80ms  78.37ms  148.01ms  197.12ms   100+0   96+3
4      16      3.85k   11.77k   502us  15.55ms  39.30ms  79.36ms  99.86ms   99+0   96+3
4      8      3.83k   6.61k   300us  5.07ms  19.24ms  31.61ms  46.62ms   100+0   96+3
4      4      3.76k   5.00k   192us  198us  3.58ms  13.43ms  19.56ms   99+0   95+4


[root@jbb3 dpdk-ans]# ./run_wrk.sh   #MAX_TX_BURST=1, #MAX_PKT_BURST=1 (not available, MAX_PKT_BURST=1 -> Error: unable to connect to host:http success)

[root@jbb3 dpdk-ans]# ./run_wrk.sh   #MAX_TX_BURST=1
PROC    CONN    RPSavg  RPSmax  LAT50   LAT75   LAT90   LAT99   LATmax  CPU_c   CPU_s
1      256      15.94k   16.40k   13.73ms  14.23ms  242.89ms  1.28s  1.48s   100+0   96+3
1      128      15.69k   16.13k   5.82ms  74.92ms  262.20ms  583.18ms  636.11ms   100+0   95+4
1      64      15.56k   16.19k   2.10ms  70.34ms  175.64ms  247.73ms  267.29ms   100+0   96+3
1      32      15.46k   15.84k   1.58ms  17.71ms  72.04ms  148.77ms  206.36ms   100+0   96+3
1      16      15.66k   15.86k   581us  15ms  38.19ms  73.13ms  91.12ms   100+0   96+3
1      8      15.44k   15.81k   299us  4.16ms  17.26ms  29.97ms  46.13ms   100+0   97+2
1      4      15.38k   15.57k   190us  203us  2.93ms  11.08ms  19.04ms   99+0   96+3
1      2      11.55k   11.92k   192us  193us  194us  293us  781us   98+1   96+3
1      1      9.67k   9.80k   92us  93us  93us  193us  200us   98+1   97+2
2      256      7.76k   14.62k   10.03ms  214.56ms  604.79ms  1.01s  1.14s   100+0   97+2
2      128      8.35k   15.70k   4.20ms  157.76ms  365.32ms  578.07ms  782.03ms   100+0   97+2
2      64      7.76k   15.64k   2.20ms  85.18ms  199.74ms  324.04ms  356.17ms   100+0   97+2
2      32      7.72k   15.18k   1.60ms  15.78ms  67.16ms  147.51ms  201.69ms   100+0   97+2
2      16      7.67k   14.96k   591us  15.19ms  39.05ms  74.68ms  98.37ms   100+0   97+2
2      8      7.68k   10.85k   299us  5.40ms  19.01ms  31ms  45.81ms   100+0   97+2
2      4      7.57k   9.98k   196us  202us  3.41ms  12.77ms  19.78ms   99+0   97+2
2      2      5.52k   6.02k   192us  198us  199us  200us  605us   98+1   97+2
4      256      4.22k   15.36k   13.84ms  14.43ms  334.45ms  1.31s  1.46s   100+0   96+3
4      128      3.87k   15.33k   7.32ms  7.62ms  142.27ms  703.55ms  837.82ms   100+0   97+2
4      64      3.84k   15.07k   3.79ms  3.81ms  66.55ms  322.94ms  379.90ms   100+0   96+3
4      32      3.87k   8.65k   1.51ms  20.23ms  73.30ms  148.48ms  206.35ms   100+0   96+3
4      16      3.87k   7.55k   588us  15.23ms  38.74ms  75.05ms  99.84ms   100+0   96+3
4      8      3.91k   6.37k   296us  5.09ms  19.09ms  30.82ms  45.02ms   100+0   96+3
4      4      3.79k   5.09k   192us  200us  4.04ms  13.51ms  19.64ms   99+0   96+3

[root@jbb3 dpdk-ans]# ./run_wrk.sh   #MAX_TX_BURST=1 + sysctl.tcp
PROC    CONN    RPSavg  RPSmax  LAT50   LAT75   LAT90   LAT99   LATmax  CPU_c   CPU_s
1      256      129.29k   132.98k   639us  1.06ms  1.33ms  1.60ms  2.44ms   0+0   99+0
1      128      91.52k   128.01k   356us  592us  659us  721us  1.26ms   0+0   98+1
1      64      122.63k   125.57k   262us  307us  336us  371us  833us   0+0   99+0
1      32      117.64k   122.12k   166us  199us  224us  259us  375us   0+0   97+2
1      16      82.43k   88.84k   138us  158us  174us  191us  591us   0+0   94+5
1      8      71.25k   72.88k   82us  98us  122us  152us  471us   0+0   93+6
1      4      39.69k   39.95k   84us  91us  95us  105us  473us   0+0   95+4
1      2      19.84k   19.97k   88us  90us  92us  102us  360us   0+0   95+4
1      1      9.73k   9.80k   93us  93us  94us  97us  448us   0+0   97+2
2      256      91.35k   127.85k   601us  814us  0.95ms  1.09ms  1.61ms   0+0   99+0
2      128      68.67k   95.09k   257us  384us  448us  522us  802us   0+0   94+5
2      64      85.41k   96.90k   218us  257us  278us  327us  710us   0+0   99+0
2      32      67.83k   81.63k   150us  168us  184us  214us  539us   0+0   93+6

[root@jbb3 dpdk-ans]# ./run_wrk.sh # send_burst=1
PROC    CONN    RPSavg  RPSmax  LAT50   LAT75   LAT90   LAT99   LATmax  CPU_c   CPU_s
1      256      129.78k   133.94k   597us  1.14ms  1.29ms  1.43ms  3.47ms   0+0   99+0
1      128      99.09k   131.24k   304us  572us  642us  709us  1.24ms   0+0   98+1
1      64      124.67k   126.94k   259us  303us  331us  365us  840us   0+0   99+0
1      32      119.09k   121.77k   157us  182us  202us  233us  701us   0+0   97+2
1      16      85.26k   100.42k   127us  140us  151us  170us  560us   0+0   94+5
1      8      72.81k   75.32k   83us  94us  117us  137us  216us   0+0   92+7
1      4      32.01k   39.94k   87us  89us  92us  104us  486us   0+0   93+6
1      2      19.83k   19.97k   89us  90us  91us  98us  626us   0+0   95+4
1      1      9.92k   9.98k   92us  93us  93us  96us  138us   0+0   96+3
2      256      76.59k   100.29k   0.90ms  1.85ms  1.93ms  2.05ms  3.04ms   0+0   91+8
2      128      61.74k   106.77k   407us  1.49ms  1.84ms  1.96ms  2.42ms   0+0   91+8
2      64      86.27k   94.99k   198us  246us  275us  315us  1.37ms   0+0   98+1
2      32      31.96k   66.60k   128us  143us  156us  180us  554us   0+0   99+0
2      16      54.55k   60.86k   123us  134us  144us  162us  525us   0+0   89+10
2      8      39.42k   39.90k   86us  93us  98us  125us  421us   0+0   89+10
2      4      19.58k   19.97k   91us  95us  98us  109us  139us   0+0   99+0
2      2      9.73k   9.82k   93us  96us  97us  107us  391us   0+0   95+4
4      256      48.68k   63.03k   1.23ms  1.27ms  1.30ms  1.37ms  2.93ms   0+0   92+7
4      128      61.30k   96.90k   376us  571us  610us  674us  1.30ms   0+0   92+7
4      64      46.33k   53.73k   245us  268us  290us  337us  743us   0+0   98+1
4      32      37.01k   45.37k   145us  159us  172us  198us  532us   0+0   81+18
4      16      22.94k   30.55k   121us  134us  144us  168us  453us   0+0   79+20
4      8      19.73k   19.95k   86us  92us  97us  123us  448us   0+0   79+20
4      4      9.69k   9.81k   90us  92us  93us  101us  462us   0+0   93+6

[root@jbb3 dpdk-ans]# ./run_wrk.sh # send_burst=1, tso=1 (first time)
PROC    CONN    RPSavg  RPSmax  LAT50   LAT75   LAT90   LAT99   LATmax  CPU_c   CPU_s
1      256      129.30k   132.63k   593us  1.13ms  1.29ms  1.44ms  3.52ms   0+0   99+0
1      128      98.64k   127.13k   302us  581us  653us  724us  1.25ms   0+0   98+1
1      64      125.61k   130.59k   258us  301us  331us  371us  515us   0+0   99+0
1      32      119.99k   122.66k   156us  181us  201us  232us  372us   0+0   97+2
1      16      85.40k   101.60k   125us  138us  150us  170us  227us   0+0   94+5
1      8      73.96k   76.11k   81us  92us  110us  133us  192us   0+0   92+7
1      4      31.73k   39.92k   87us  89us  92us  104us  0.95ms   0+0   94+5
1      2      19.84k   19.97k   89us  90us  91us  96us  139us   0+0   95+4
1      1      9.73k   9.80k   93us  93us  94us  97us  142us   0+0   97+2
2      256      90.24k   124.97k   658us  830us  0.92ms  1.02ms  1.63ms   0+0   99+0
2      128      71.47k   106.48k   192us  380us  449us  522us  1.04ms   0+0   97+2
2      64      83.35k   93.17k   195us  241us  272us  315us  520us   0+0   99+0
2      32      67.36k   86.65k   141us  159us  174us  197us  575us   0+0   90+9
2      16      48.89k   62.27k   116us  131us  141us  161us  400us   0+0   90+9
2      8      39.33k   39.93k   85us  93us  98us  123us  497us   0+0   90+9
2      4      15.48k   19.97k   94us  98us  99us  107us  0.90ms   0+0   96+3
2      2      9.80k   9.98k   93us  96us  97us  105us  389us   0+0   95+4
4      256      50.00k   70.59k   1.15ms  1.20ms  1.25ms  1.62ms  3.16ms   0+0   93+6
4      128      37.99k   61.16k   257us  493us  546us  618us  1.31ms   0+0   86+13
4      64      46.46k   57.17k   213us  238us  262us  311us  746us   0+0   99+0
4      32      37.76k   45.64k   144us  157us  170us  195us  519us   0+0   81+18
4      16      24.61k   31.01k   120us  134us  144us  168us  603us   0+0   82+17
4      8      19.74k   19.95k   86us  91us  97us  122us  587us   0+0   80+19
4      4      9.91k   9.98k   90us  94us  98us  103us  448us   0+0   93+6

[root@jbb3 dpdk-ans]# ./run_wrk.sh # send_burst=1, tso=1 (second time)
PROC    CONN    RPSavg  RPSmax  LAT50   LAT75   LAT90   LAT99   LATmax  CPU_c   CPU_s
1      256      129.93k   132.68k   588us  1.10ms  1.29ms  1.46ms  3.12ms   0+0   99+0
1      128      102.68k   131.68k   286us  568us  642us  715us  1.19ms   0+0   98+1
1      64      125.07k   128.36k   258us  302us  331us  366us  537us   0+0   99+0
1      32      119.54k   123.27k   152us  177us  197us  229us  584us   0+0   97+2
1      16      87.01k   100.95k   124us  138us  151us  170us  578us   0+0   94+5
1      8      73.26k   75.78k   81us  93us  115us  135us  225us   0+0   93+6
1      4      31.90k   39.95k   87us  90us  92us  102us  618us   0+0   95+4
1      2      19.84k   19.97k   89us  90us  90us  97us  292us   0+0   96+3
1      1      9.92k   9.98k   93us  93us  94us  96us  137us   0+0   97+2
2      256      90.55k   125.84k   637us  827us  0.92ms  1.02ms  1.66ms   0+0   99+0
2      128      77.48k   97.69k   183us  364us  437us  509us  1.11ms   0+0   94+5
2      64      78.25k   95.39k   190us  234us  264us  315us  614us   0+0   99+0
2      32      68.70k   86.50k   138us  154us  170us  195us  673us   0+0   91+8
2      16      49.85k   62.37k   116us  131us  141us  161us  437us   0+0   89+10
2      8      39.40k   39.92k   86us  93us  98us  123us  587us   0+0   90+9
2      4      19.80k   19.97k   89us  93us  97us  105us  502us   0+0   94+5
2      2      9.92k   9.98k   93us  96us  97us  105us  389us   0+0   95+4
4      256      52.27k   68.34k   1.06ms  1.11ms  1.15ms  1.22ms  2.34ms   0+0   95+4
4      128      55.08k   82.51k   257us  464us  517us  597us  1.14ms   0+0   90+9
4      64      48.62k   57.83k   204us  230us  252us  301us  694us   0+0   99+0
4      32      36.45k   45.66k   142us  157us  171us  197us  1.22ms   0+0   83+16
4      16      25.29k   30.39k   119us  134us  144us  168us  667us   0+0   81+18
4      8      19.64k   19.95k   86us  92us  97us  123us  527us   0+0   80+19
4      4      9.89k   9.98k   90us  92us  96us  101us  477us   0+0   92+7


 #echo performance > /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor
 

